## 表单联动

要评价一个表单工具能力强不强，表单联动能力至关重要。 **vue-form-craft** 通过`动态计算schema` 、`watch 监听` 等方式尽可能的让表单联动变简单。


### 插值表达式

插值表达式为字符串格式，以双花括号 {{ ... }}为语法特征，对于简单的联动提供一种简洁的配置方式。

被双花括号包裹的字符串一律会被解析为 **js表达式并返回结果**，且只能使用联动变量。这种联动方式基本能应对大部分联动场景😎

例如：控制字段禁用、隐藏、文案提示等交互。

**Schema 所有协议字段都支持插值表达式。**

> Schema插值表达式 可以使用的联动变量：

| 变量名      | 类型   | 描述                                                     |
| ----------- | ------ | -------------------------------------------------------- |
| $val        | any    | 当前字段值                                               |
| $parentVal  | any    | 当前字段的父级字段值                                     |
| $select     | Object | 当前字段如果是【选择类字段】，这个就是选中项对应的数据源 |
| $values     | Object | 整个表单的值                                             |
| $selectData | Object | 【选择类字段】选中项数据源合集                           |
| $item       | Object | 【自增组件】专用，单行的数据值                           |
| ...         | any    | 由schemaContext传入的自定义变量                          |

<br/>

#### 举个栗子1

评分低于3星可以输入差评原因

<div class="linkage1"></div>

<br/>
<br/>

#### 举个栗子2

【文章】需要依赖【分类】去查询，所以【分类】没选时，需要隐藏【文章】。

【分类】改变时，动态改变传给【文章】的接口参数

<div class="linkage2"></div>


### change配置

上面的插值表达式只能做配置级的联动，不能做 **修改表单值** 类的联动，所以给每个字段提供了一个change配置。

change是一个数组，可以同时联动多个字段。target为目标字段，value是修改的值，也支持插值表达式。

配置了change，就会在这个字段的值改变时，才会触发change联动

<br/>

#### 举个栗子3

<div class="linkage3"></div>


<br/>

#### 举个栗子4

一些场景需要根据已选值的数据源中取某个字段，再给其他字段使用，这就可以用上 **$select** 了

<div class="linkage4"></div>

